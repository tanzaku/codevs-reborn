# codevs rebornに参加しました

codevs rebornが参加しました。
ぷよぷよ的な対戦ゲームのAIを開発するコンテストでした。
codevs2.0で。
１ヶ月ほど予選期間があり、予選2位でした。

# 参加記
## 体験版開始〜開始
まずは前回のルールとの差分を調査しました。
そして前回までの参加者のブログなどをみつつ基本的な部分を作っていき、それなりの連鎖が組めるようになりました。
この時点でスキル狙い型のAIを試してみましたが、連鎖型AIで簡単に潰せてしまうことがわかり、以後連鎖型AIに集中することにしました。

また結局使いませんでしたが、AWS Lambdaで探索処理を動かし並列計算する準備をしていました。

## 開始〜GW終了
このゲームでは連鎖力と戦略が重要です。
オンライン対戦をみていると、明らかに他の人に連鎖力で負けていることがわかりました。
そこで、まずは全ての基礎となる連鎖力を十分な水準まで引き上げることにしました。（ずっと連鎖力を高めていた訳でなく、スキル狙い対策などの戦略部分の修正も少し行なっていましたが）
これには予想以上に時間がかかり、GW終了2日前にようやく満足いく水準になりました。
基本戦略は初回13ターン、その後は10ターン先まで探索し13連鎖発火狙いを繰り返す、というシンプルなもの。
この時点で確かGold中位あたりで安定していて、連鎖力では最上位レベルにきたかなと感じました。


## GW終了〜予選終了
そこからカウンター、アンチカウンター処理などをいれました。
評価関数をちょっと変えて上の方を埋めにくいようにしました。
終盤はGold争いが非常に厳しかったが、何とか残れてよかった。

# 技術的な詳細
## ビームサーチで使用する評価関数
過去の参加記を見て試しましたが、その中ではkmyk氏の評価関数が一番強かったです。
ただしkmyk氏の評価関数は発火点を伸ばしづらい欠点があるため、その部分を改善しています。

ビームサーチの評価関数として、横軸タイムステップ、縦軸評価値と、峰ができるのがよくない。
指数的に必要な探索回数が増えてしまうので。

## 連鎖処理の高速化
* ビット演算で消える箇所の計算が1列分まとめて求められる
* pext命令で落下処理ができる
